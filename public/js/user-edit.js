(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{GHrf:function(e,t,r){"use strict";var a=r("lbtq");r.n(a).a},c2kw:function(e,t,r){"use strict";var a={name:"ImageUpload",props:["label","form","formImagePropertyName","defaultValue","defaultUrl"],data:function(){return{image:null,imageBase64:null}},computed:{value:function(){return this.image?this.image.name:this.defaultValue||this.$t("Upload a new image")},preview:function(){return this.imageBase64||this.defaultUrl}},methods:{setImage:function(e){var t=this,r=e.target.files[0];if(r&&r.type.match(/^image\/.*/)){this.formImagePropertyName&&this.form.errors.clear(this.formImagePropertyName),this.image=r;var a=new FileReader;a.onload=function(e){t.imageBase64=e.target.result},a.readAsDataURL(r),this.$emit("change",r)}}}},n=(r("GHrf"),r("KHd+")),o=r("ZUTo"),i=r.n(o),s=r("ghKu"),l=r("hlRy"),u=Object(n.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-text-field",{attrs:{value:e.value,label:e.label,"append-icon":"mdi-paperclip",outlined:"",readonly:"",error:e.formImagePropertyName&&e.form.errors.has(e.formImagePropertyName),"error-messages":e.formImagePropertyName?e.form.errors.get(e.formImagePropertyName):""},on:{"click:append":function(t){return e.$refs.fileInput.click()}},scopedSlots:e._u([e.preview?{key:"prepend-inner",fn:function(){return[r("v-avatar",{attrs:{size:"28",tile:""},on:{click:function(t){return e.$refs.fileInput.click()}}},[r("img",{attrs:{src:e.preview,alt:e.label}})])]},proxy:!0}:null],null,!0)}),e._v(" "),r("input",{ref:"fileInput",staticClass:"d-none",attrs:{type:"file",accept:"image/*"},on:{change:e.setImage}})],1)}),[],!1,null,"6c279dc8",null);t.a=u.exports;i()(u,{VAvatar:s.a,VTextField:l.a})},g5bU:function(e,t,r){(e.exports=r("I1BE")(!1)).push([e.i,"\n.v-avatar[data-v-6c279dc8] {\r\n  cursor: pointer;\n}\r\n",""])},"gA+b":function(e,t,r){"use strict";function a(e){return Array.isArray(e)}function n(e,t,r){return t=t||new FormData,void 0===e?t:(a(e)?e.forEach((function(e){n(e,t,r+"[]")})):!function(e){return e===Object(e)}(e)||function(e){return e instanceof File}(e)||function(e){return e instanceof Date}(e)?t.append(r,e):Object.keys(e).forEach((function(o){var i=e[o];if(a(i))for(;o.length>2&&o.lastIndexOf("[]")===o.length-2;)o=o.substring(0,o.length-2);n(i,t,r?r+"["+o+"]":o)})),t)}r.d(t,"a",(function(){return n}))},iotO:function(e,t,r){"use strict";r.r(t);var a=r("o0o1"),n=r.n(a),o=r("4HBT"),i=r.n(o),s=r("C3Ci"),l=r("c2kw"),u=r("L2JU"),c=r("gA+b");function f(e,t,r,a,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,n)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p,v,h={middleware:["auth","verified","2fa_passed"],mixins:[s.a],components:{ImageUpload:l.a},metaInfo:function(){return{title:this.$t("Profile")}},data:function(){return{form:new i.a({name:null,email:null})}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(u.d)("auth",["user"]),{changed:function(){var e=this;return this.form.keys().some((function(t){return e.form[t]!==e.user[t]}))}}),methods:{changeAvatar:function(e){this.$set(this.form,"avatar",e)},update:(p=n.a.mark((function e(){var t,r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.form.avatar?{transformRequest:[function(e,t){return Object(c.a)(e)}]}:{},e.next=3,this.form.submit("post","/api/user/update",t);case 3:r=e.sent,a=r.data,this.$store.dispatch("auth/updateUser",a),this.$store.dispatch("message/success",{text:this.$t("Data successfully updated.")});case 7:case"end":return e.stop()}}),e,this)})),v=function(){var e=this,t=arguments;return new Promise((function(r,a){var n=p.apply(e,t);function o(e){f(n,r,a,o,i,"next",e)}function i(e){f(n,r,a,o,i,"throw",e)}o(void 0)}))},function(){return v.apply(this,arguments)})},created:function(){var e=this;this.form.keys().forEach((function(t){e.form[t]=e.user[t]}))}},g=r("KHd+"),b=r("ZUTo"),y=r.n(b),w=r("gzZi"),O=r("sK+t"),x=r("mdmw"),I=r("Yq0q"),P=r("pSOK"),j=r("S9TP"),k=r("D9m0"),V=r("hlRy"),$=r("cdmR"),_=r("Kn9U"),E=Object(g.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[r("v-card",[r("v-toolbar",[r("v-toolbar-title",[e._v("\n            "+e._s(e.$t("Profile"))+"\n          ")])],1),e._v(" "),r("v-card-text",[r("v-form",{on:{submit:function(t){return t.preventDefault(),e.update(t)}},model:{value:e.formIsValid,callback:function(t){e.formIsValid=t},expression:"formIsValid"}},[r("v-text-field",{attrs:{label:e.$t("Name"),type:"text",name:"name",rules:[e.validationRequired],error:e.form.errors.has("name"),"error-messages":e.form.errors.get("name"),outlined:""},on:{keydown:function(t){return e.clearFormErrors(t,"name")}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),r("v-text-field",{attrs:{label:e.$t("Email"),type:"email",name:"email",rules:[e.validationRequired,e.validationEmail],error:e.form.errors.has("email"),"error-messages":e.form.errors.get("email"),outlined:""},on:{keydown:function(t){return e.clearFormErrors(t,"email")}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),r("image-upload",{attrs:{label:e.$t("Avatar"),form:e.form,"form-image-property-name":"avatar","default-value":e.user.avatar,"default-url":e.user.avatar_url},on:{change:e.changeAvatar}}),e._v(" "),r("v-btn",{attrs:{type:"submit",color:"primary",disabled:!e.formIsValid||!e.changed||e.form.busy,loading:e.form.busy}},[e._v("\n              "+e._s(e.$t("Save"))+"\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=E.exports;y()(E,{VBtn:w.a,VCard:O.a,VCardText:x.c,VCol:I.a,VContainer:P.a,VForm:j.a,VRow:k.a,VTextField:V.a,VToolbar:$.a,VToolbarTitle:_.a})},lbtq:function(e,t,r){var a=r("g5bU");"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(a,n);a.locals&&(e.exports=a.locals)}}]);
//# sourceMappingURL=user-edit.js.map